<!--
	Copyright (c) 2014, Kornel Maczyński. All rights reserved. Use of this source
	code is governed by AGPLv3 license that can be found in the LICENSE file.
	If you want to contribute read the rules in the CONTRIBUTING file.
-->

<link rel="import" href="../../packages/polymer/polymer.html">

<link rel="import" href="../../packages/paper_elements/paper_icon_button.html">

<link rel="import" href="../../packages/core_elements/core_toolbar.html">
<link rel="import" href="../../packages/core_elements/core_menu.html">
<link rel="import" href="../../packages/core_elements/core_header_panel.html">
<link rel="import" href="../../packages/core_elements/core_drawer_panel.html">
<link rel="import" href="../../packages/core_elements/core_a11y_keys.html">

<link rel="import" href="search_box.html">
<link rel="import" href="login_widget.html">
<link rel="import" href="triki_menu_item.html">

<link rel="import" href="../../packages/spa_router/spa_router.html">
<link rel="import" href="../../packages/spa_router/spa_route.html">

<link rel="import" href="dummy_elem.html">

<polymer-element name="triki-main">
	<template>
		<link rel="stylesheet" href="triki_main.css">
		<core-a11y-keys keys="esc" on-keys-pressed="{{closePanel}}"></core-a11y-keys>

		<core-drawer-panel id="drawerPanel" forceNarrow>
			<!-- Side MENU -->
			<core-header-panel fit mode="waterfall" drawer>
				<core-toolbar on-tap="{{closePanel}}">
					<span>Menu</span>
				</core-toolbar>
				<div fit class="white" layout vertical>
					<core-menu>
						<triki-menu-item icon="home" href="#/">Home</triki-menu-item>
						<triki-menu-item icon="help" href="#/help">Help</triki-menu-item>
					</core-menu>
					<div flex></div>
					<div>© 2014 Kornel Maczyński</div>
				</div>
			</core-header-panel>
			<!--  -->
			<core-header-panel fit mode="waterfall" main>
				<!-- Top MENU -->
				<core-toolbar>
					<!-- menu btn -->
					<paper-icon-button icon="menu" on-tap="{{togglePanel}}" title="Menu"
						aria-label="Menu" id="menu-btn">
					</paper-icon-button>
					<!-- logo btn -->
					<a href="#/" id="logo-link"><paper-icon-button
						src="images/icons/ico-clean.svg"
						aria-label="Home"
						title="Go to home page"
						id="logo-btn"></paper-icon-button>
					</a>
					<!-- search box -->
					<search-box flex three></search-box>
					<span flex></span>
					<!-- login widget -->
					<login-widget></login-widget>
				</core-toolbar>

				<!-- MAIN ARTICLE -->
				<div layout vertical>
					<main>
						<spa-router>
							<spa-route path="/" elem="dummy-elem"></spa-route>
							<spa-route path="**">
								<template><p>Unrecognized route!</p></template>
							</spa-route>
						</spa-router>
					</main>
				</div>
			</core-header-panel>
		</core-drawer-panel>
	</template>
	<script type="application/dart" src="triki_main.dart"></script>
</polymer-element>
